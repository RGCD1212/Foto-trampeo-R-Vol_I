

# Estimación de riqueza y diversidad: `vegan` 

### *Luz A. Pérez-Solano* {-}

## Introducción

Las comunidades no están aisladas en un entorno neutro, para comprender los cambios de la biodiversidad con relación a la estructura del paisaje, la separación de los componentes alfa, beta y gamma [@Whittaker1972] puede ser de gran utilidad. La **diversidad alfa** es la riqueza de especies de una comunidad particular a la que consideramos homogénea, la **diversidad beta** es el grado de cambio o reemplazo en la composición de especies entre diferentes comunidades en un paisaje, y la **diversidad gamma** es la riqueza de especies del conjunto de comunidades que integran un paisaje, resultante tanto de las diversidades alfa como de las diversidades beta [@Moreno2001; @Whittaker1972]. La mayoría de los métodos propuestos para evaluar la diversidad de especies se refieren a la diversidad dentro de las comunidades (alfa), para este capítulo nos enfocaremos en el análisis de la diversidad alfa mediante índices clásicos y la serie de números Hill. El objetivo del presente capítulo es presentar los análisis básicos para describir comunidades a partir de registros obtenidos con cámaras-trampa, como lo son los índices clásicos de diversidad y la serie de números Hill, empleando el paquete `vegan` por @Oksanen2018.

## Descripción del paquete

El paquete `vegan` proporciona diversas herramientas con las cuales se puede describir a las comunidades, por ejemplo los índices de diversidad. Tiene las funciones más básicas de análisis de diversidad, ordenación de comunidades y análisis de disimilitud. Este paquete trabaja en conjunto con `labdsv`, `ade4`, `BiodiversityR`. La viñeta con el PDF de este paqute se puede bajar desde: <https://cran.r-project.org/web/packages/vegan/vegan.pdf>

Instalar y luego abrir la librería:

```{r echo=TRUE, message=FALSE, warning=FALSE}
library(vegan)
```

Cargar la matriz de datos, las especies deben de estar acomodadas en las columnas y en las filas los sitios, o en este caso, las cámaras-trampa:

```{r echo=TRUE, message=FALSE, warning=FALSE}
diversidad <- read.csv("mamiferos.csv", row.names=1)
```

La base de datos contiene una matriz de número de fotos independientes por especie (Cuadro \@ref(tab:v1)). 

```{r v1, echo=FALSE, message=FALSE, warning=FALSE, results='asis'}
knitr::kable(t(diversidad), caption = "Ejemplo de registros independientes de las especies fotografiadas en cada cámára-trampa (C1 a C9) en el sitio de estudio.")
```

## Estimación de índices

### Riqueza específica (N0)

Número total de especies. El siguiente código hace un recuento de cuántas especies fueron registradas por cada una de las cámaras.

```{r echo=TRUE, message=FALSE, warning=FALSE}
(N0 <- rowSums(diversidad >0))  
```

### Índice de Shannon-Wiener 

```{r echo=TRUE, message=FALSE, warning=FALSE}
H <- diversity(diversidad, index="shannon")
(round(H,2))
```

### Equidad de Pielou

```{r, echo=TRUE, message=FALSE, warning=FALSE}
(J <- round(H/log(N0),2))   
```

### Índice de Simpson

```{r, echo=TRUE, message=FALSE, warning=FALSE}
(simp <- round(diversity(diversidad, "simpson"),2))
```

### Inverso de Simpson

```{r, echo=TRUE, message=FALSE, warning=FALSE}
(invsimp <- round(diversity(diversidad, "inv"),2))
```

### Serie de números de Hill

```{r, echo=TRUE, message=FALSE, warning=FALSE}
(N1 <- round(exp(H),2))   
```

## Estadísticos simples

Podemos generar el promedio y desviación estándar de la riqueza específica y la serie de números de Hill para todas las cámaras-trampa. Por ejemplo, la riqueza específica (N0):

```{r, echo=TRUE, message=FALSE, warning=FALSE}
mean(N0)
sd(N0)
```

Serie de números de Hill:

```{r, echo=TRUE, message=FALSE, warning=FALSE}
mean(N1)
sd(N1)
```

## Tabla final de resultados

Se puede crear una tabla que agrupe los resultados (Cuadro \@ref(tab:v2)).

```{r v2, echo=FALSE, message=FALSE, warning=FALSE, results='asis'}
diversidad_mamiferos <- round(data.frame(N0, H, J, simp, invsimp, N1),2)
knitr::kable(diversidad_mamiferos, caption = "Resumen de índices de diversidad.")
```

Si se quiere exportar esta tabla en formato .csvse se puede emplear el siguiente código: 

```
write.csv (diversidad_mamiferos, "diversidad_mamiferos.csv")
```

## Sumario

En este capítulo se ha mostrado el proceso para estimar algunos índices de diversidad. Se recomienda que el usuario lea más al respecto sobre esta temática [@Jost2012; @Moreno2011] para tomar con cautela el uso e interpretación de los índices clásicos y darle más peso al uso de la serie de números Hill.



